<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¨»ç”°è¾¹Â·ç§å®´ - åœ¨çº¿ç‚¹é¤ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #c5a059;
            --dark-bg: #0a0a0a;
            --paper-bg: #fdfbf7;
        }
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--dark-bg);
            color: #d4d4d8;
        }
        h1, h2, h3, .serif { font-family: 'Noto Serif SC', serif; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .cart-drawer { transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        
        /* åˆ†ç±»æŒ‰é’®æ ·å¼ */
        .category-btn {
            transition: all 0.4s ease;
            border-radius: 4px;
            margin-bottom: 6px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #27272a;
            background-color: rgba(0,0,0,0.4);
            color: #71717a;
        }
        
        .category-btn.active {
            border-color: var(--gold);
            color: var(--gold);
            background-color: rgba(197, 160, 89, 0.05);
            box-shadow: 0 0 15px rgba(197, 160, 89, 0.15);
        }

        .item-card {
            transition: all 0.4s ease;
            border: 1px solid #262626;
            background: #141414;
            overflow: hidden;
        }
        .item-card:hover {
            border-color: var(--gold);
            transform: translateY(-4px);
        }
        
        .btn-gold {
            background: linear-gradient(135deg, #c5a059 0%, #8e6d31 100%);
            color: white;
        }
        
        /* ç¥¨æ®åŸºç¡€æ ·å¼ */
        #receipt-card {
            background-color: var(--paper-bg);
            background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d4d4d4' fill-opacity='0.2' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 6V5zM6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E");
            color: #2c2c2c;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            width: 380px;
        }
        
        /* =========================================
           ä¿å­˜å›¾ç‰‡æ—¶çš„å¢å¼ºæ’ç‰ˆ (å®Œå…¨è§£å†³é‡å )
        ========================================= */
        .thermal-mode {
            background-image: none !important;
            background-color: #ffffff !important;
            color: #000000 !important;
            box-shadow: none !important;
            padding: 25px 20px !important;
            width: 380px !important;
            display: block !important;
            height: auto !important;
        }
        .thermal-mode * {
            color: #000000 !important;
            border-color: #000000 !important;
            position: static !important; /* å–æ¶ˆæ‰€æœ‰å…ƒç´ çš„ç›¸å¯¹/ç»å¯¹å®šä½ï¼Œå¼ºåˆ¶æµå¼å¸ƒå±€ */
        }
        /* æ ‡é¢˜åŒºç‹¬ç«‹ */
        .thermal-mode h2 { font-size: 56px !important; margin: 15px 0 10px !important; text-align: center; font-weight: 900 !important; line-height: 1.1 !important; }
        .thermal-mode p { font-size: 20px !important; text-align: center; margin-bottom: 20px !important; }
        
        /* åŸºç¡€ä¿¡æ¯æ åŒºéš” */
        .thermal-mode .font-mono { 
            font-size: 22px !important; 
            line-height: 1.8 !important; 
            border-bottom: 3px solid #000 !important; 
            padding-bottom: 10px !important; 
            margin-bottom: 20px !important; 
            display: block !important;
        }
        
        /* åˆ—è¡¨æ’ç‰ˆï¼šä½¿ç”¨æ ‡å‡†å—å¸ƒå±€é˜²æ­¢é‡å  */
        .thermal-mode #receipt-items-list div { 
            font-size: 30px !important; 
            margin-bottom: 18px !important; 
            line-height: 1.3 !important; 
            display: flex !important;
            justify-content: space-between !important;
            align-items: flex-start !important;
            width: 100% !important;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 5px;
        }
        .thermal-mode #receipt-items-list .w-8 { width: 50px !important; text-align: left !important; font-weight: bold; }
        .thermal-mode #receipt-items-list .flex-grow { flex: 1 !important; padding: 0 10px !important; white-space: normal !important; word-wrap: break-word !important; }
        .thermal-mode #receipt-items-list .text-right { text-align: right !important; font-weight: bold; }

        /* åˆ†éš”çº¿å¼ºåŒ– */
        .thermal-mode .receipt-line { border-bottom: 5px solid #000 !important; margin: 25px 0 !important; height: 0 !important; display: block !important; }
        
        /* æ€»è®¡åŒºç‹¬ç«‹é˜²æ­¢é‡å  */
        .thermal-mode .flex.justify-between.items-baseline { 
            display: flex !important; 
            flex-direction: column !important; 
            align-items: flex-end !important;
            margin-top: 20px !important;
            margin-bottom: 30px !important;
        }
        .thermal-mode .text-sm.font-bold { font-size: 28px !important; margin-bottom: 10px !important; align-self: flex-start !important; }
        .thermal-mode #receipt-total { font-size: 80px !important; font-weight: 900 !important; line-height: 1 !important; margin-top: 5px !important; }

        /* å¤‡æ³¨æ å®Œå…¨ç‹¬ç«‹ */
        .thermal-mode #receipt-note-container { margin-top: 30px !important; display: block !important; }
        .thermal-mode #receipt-note-container p:first-child { font-size: 24px !important; font-weight: bold !important; margin-bottom: 10px !important; }
        .thermal-mode #receipt-note { 
            font-size: 28px !important; 
            border: 4px solid #000 !important; 
            background: none !important; 
            padding: 15px !important; 
            line-height: 1.4 !important;
            display: block !important;
        }
        
        /* ç¡®è®¤ç« ï¼šç§»è‡³æ–‡æœ«ï¼Œä¸å†æ‚¬æµ®é‡å  */
        .thermal-mode .seal-badge { 
            display: flex !important;
            margin: 50px auto 20px !important; 
            opacity: 1 !important; 
            border: 6px solid #000 !important; 
            width: 140px !important; 
            height: 140px !important; 
            border-radius: 50% !important;
            align-items: center !important;
            justify-content: center !important;
            transform: rotate(-5deg) !important;
        }
        .thermal-mode .seal-badge span { font-size: 20px !important; font-weight: 900 !important; }
        .thermal-mode .text-center.space-y-2 { margin-top: 30px !important; }
    </style>
</head>
<body class="selection:bg-[#c5a059]/30">

    <nav class="bg-black/80 backdrop-blur-md border-b border-zinc-800 sticky top-0 z-40 no-print">
        <div class="max-w-[1600px] mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <img src="https://i.ibb.co/DfGvCVbJ/logo-2-01.png" alt="Logo" class="h-10 w-auto object-contain">
                <div>
                    <h1 class="text-xl font-bold text-white tracking-[0.2em]">ç¨»ç”°è¾¹Â·ç§å®´</h1>
                    <p class="text-[10px] text-[#c5a059] tracking-widest uppercase opacity-80">Authentic Private Cuisine</p>
                </div>
            </div>
            
            <button onclick="toggleCart()" class="relative p-2 text-zinc-400 hover:text-[#c5a059] transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                </svg>
                <span id="cart-badge" class="absolute -top-1 -right-1 bg-[#c5a059] text-white text-[10px] font-bold w-5 h-5 flex items-center justify-center rounded-full hidden border-2 border-black">0</span>
            </button>
        </div>
    </nav>

    <div class="max-w-[1600px] mx-auto flex flex-col lg:flex-row min-h-screen no-print">
        <aside class="w-full lg:w-40 flex-shrink-0 sticky top-20 lg:h-[calc(100vh-5rem)] border-b lg:border-b-0 lg:border-r border-zinc-900 bg-[#0a0a0a]/95 backdrop-blur z-30">
            <div class="p-4 overflow-x-auto lg:overflow-y-auto hide-scrollbar flex lg:flex-col gap-1 whitespace-nowrap lg:whitespace-normal">
                <button onclick="filterMenu('all', this)" class="category-btn active py-2 lg:py-2.5">
                    <span class="text-[8px] uppercase opacity-60 mb-0.5">All</span><span class="text-xs lg:text-sm font-bold">å…¨éƒ¨</span>
                </button>
                <button onclick="filterMenu('å‡‰èœ', this)" class="category-btn py-2 lg:py-2.5">
                    <span class="text-[8px] uppercase opacity-40 mb-0.5">Cold</span><span class="text-xs lg:text-sm font-medium">å‡‰èœ</span>
                </button>
                <button onclick="filterMenu('æ°´äº§', this)" class="category-btn py-2 lg:py-2.5">
                    <span class="text-[8px] uppercase opacity-40 mb-0.5">Aqua</span><span class="text-xs lg:text-sm font-medium">æ°´äº§</span>
                </button>
                <button onclick="filterMenu('è‚‰é£Ÿ', this)" class="category-btn py-2 lg:py-2.5">
                    <span class="text-[8px] uppercase opacity-40 mb-0.5">Meat</span><span class="text-xs lg:text-sm font-medium">è‚‰é£Ÿ</span>
                </button>
                <button onclick="filterMenu('ç‚’èœ', this)" class="category-btn py-2 lg:py-2.5">
                    <span class="text-[8px] uppercase opacity-40 mb-0.5">Stir</span><span class="text-xs lg:text-sm font-medium">ç‚’èœ</span>
                </button>
                <button onclick="filterMenu('è”¬é£Ÿ', this)" class="category-btn py-2 lg:py-2.5">
                    <span class="text-[8px] uppercase opacity-40 mb-0.5">Veg</span><span class="text-xs lg:text-sm font-medium">è”¬é£Ÿ</span>
                </button>
                <button onclick="filterMenu('æ±¤ç±»', this)" class="category-btn py-2 lg:py-2.5">
                    <span class="text-[8px] uppercase opacity-40 mb-0.5">Soup</span><span class="text-xs lg:text-sm font-medium">æ±¤ç±»</span>
                </button>
                <button onclick="filterMenu('ç‚¹å¿ƒ', this)" class="category-btn py-2 lg:py-2.5">
                    <span class="text-[8px] uppercase opacity-40 mb-0.5">Pastry</span><span class="text-xs lg:text-sm font-medium">ç‚¹å¿ƒ</span>
                </button>
                <button onclick="filterMenu('é…’æ°´', this)" class="category-btn py-2 lg:py-2.5">
                    <span class="text-[8px] uppercase opacity-40 mb-0.5">Drink</span><span class="text-xs lg:text-sm font-medium">é…’æ°´</span>
                </button>
            </div>
        </aside>

        <main class="flex-grow p-6 lg:p-10">
            <header class="mb-10">
                <h2 class="text-3xl font-bold text-white mb-3 tracking-tight">å¯»å‘³ç”°å›­ç§äº«</h2>
                <div class="w-12 h-[2px] bg-[#c5a059] mb-5"></div>
                <p class="text-zinc-500 max-w-lg text-sm leading-relaxed italic">ä¸æ—¶ä¸é£Ÿï¼Œé¦ˆäºå¸­ä¸Šã€‚æ¯ä¸€é“èœéƒ½æ˜¯å¯¹åœŸåœ°æœ€çœŸè¯šçš„ç¤¼èµã€‚</p>
            </header>
            <div id="menu-grid" class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6"></div>
        </main>
    </div>

    <div id="cart-overlay" onclick="toggleCart()" class="fixed inset-0 bg-black/70 z-50 hidden backdrop-blur-md no-print"></div>
    <div id="cart-sidebar" class="fixed right-0 top-0 h-full w-full max-w-md bg-[#0f0f0f] z-50 shadow-2xl translate-x-full cart-drawer flex flex-col border-l border-zinc-800 no-print">
        <div class="p-8 border-b border-zinc-800 flex justify-between items-center">
            <div><h3 class="text-xl font-bold text-white">é¢„å®šæ¸…å•</h3><p class="text-[10px] text-zinc-500 tracking-widest uppercase mt-1">Menu Summary</p></div>
            <button onclick="toggleCart()" class="text-zinc-500 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
        </div>
        <div id="cart-items" class="flex-grow overflow-y-auto p-8 space-y-6 font-sans text-xs"></div>
        <div class="p-8 border-t border-zinc-800 bg-black/30">
            <div class="flex justify-between items-end mb-6"><span class="text-zinc-500 text-sm tracking-widest uppercase">æ€»è®¡è´¹ç”¨</span><span id="cart-total" class="text-3xl font-bold text-[#c5a059]">Â¥ 0</span></div>
            <button onclick="openOrderModal()" class="w-full btn-gold text-white py-5 font-bold tracking-[0.3em] uppercase transition-all shadow-2xl">é¢„è§ˆå¹¶ç”Ÿæˆèœå•</button>
        </div>
    </div>

    <div id="order-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-sm transition-opacity opacity-0 no-print" id="order-modal-bg" onclick="closeOrderModal()"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-5xl h-[90vh] md:h-auto flex flex-col md:flex-row gap-0 md:gap-8 p-4 pointer-events-none opacity-0 scale-95 transition-all duration-300" id="order-modal-content">
            
            <div class="bg-[#18181b] border border-zinc-800 rounded-xl p-6 md:p-8 flex-1 pointer-events-auto shadow-2xl flex flex-col no-print">
                <div class="mb-6">
                    <h3 class="text-xl text-[#c5a059] font-serif font-bold mb-2">è®¢å•ç¡®è®¤</h3>
                    <p class="text-zinc-500 text-xs">å¡«å†™ä¿¡æ¯ï¼š</p>
                </div>
                
                <div class="space-y-4 mb-8">
                    <div>
                        <label class="block text-zinc-400 text-xs uppercase tracking-wider mb-2">æ¡Œå· / ç§°å‘¼</label>
                        <input type="text" id="input-table" placeholder="ä¾‹å¦‚ï¼š8å·æ¡Œ æˆ– æå…ˆç”Ÿ" 
                            class="w-full bg-black/50 border border-zinc-700 rounded p-3 text-white focus:border-[#c5a059] focus:outline-none transition-colors text-sm"
                            oninput="updateReceiptInfo()">
                    </div>
                    <div>
                        <label class="block text-zinc-400 text-xs uppercase tracking-wider mb-2">å¤‡æ³¨è¦æ±‚</label>
                        <textarea id="input-note" rows="3" placeholder="ä¾‹å¦‚ï¼šå¾®è¾£ã€å…è‘±å§œ..." 
                            class="w-full bg-black/50 border border-zinc-700 rounded p-3 text-white focus:border-[#c5a059] focus:outline-none transition-colors text-sm resize-none"
                            oninput="updateReceiptInfo()"></textarea>
                    </div>
                </div>

                <div class="mt-auto space-y-3">
                    <button onclick="saveOrderImage()" class="w-full btn-gold text-white py-4 font-bold tracking-widest uppercase rounded shadow-lg hover:brightness-110 transition-all flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                        ä¿å­˜è®¢å•
                    </button>
                    <button onclick="copyOrderText()" class="w-full bg-zinc-800 text-zinc-300 py-3 font-bold tracking-widest uppercase rounded hover:bg-zinc-700 transition-all flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" /></svg>
                        å¤åˆ¶è®¢å•æ–‡æœ¬
                    </button>
                    <button onclick="closeOrderModal()" class="w-full bg-transparent border border-zinc-700 text-zinc-400 py-3 text-xs tracking-widest uppercase rounded hover:border-zinc-500 transition-all">è¿”å›ä¿®æ”¹</button>
                </div>
            </div>

            <div class="flex-1 flex items-center justify-center bg-[#0a0a0a]/50 rounded-xl border border-zinc-800/50 p-4 md:p-8 overflow-y-auto pointer-events-auto">
                <div id="receipt-card" class="p-8 relative mx-auto font-sans text-black">
                    <div class="text-center mb-6 border-b-2 border-black pb-4">
                        <div class="w-12 h-12 border-2 border-black mx-auto flex items-center justify-center mb-3">
                            <span class="font-serif font-bold text-xl">ç¨»</span>
                        </div>
                        <h2 class="text-2xl font-serif font-bold tracking-widest mb-1">é¢„å®šå•</h2>
                        <p class="text-[9px] uppercase tracking-[0.2em] opacity-60">Reservation Menu</p>
                    </div>
                    
                    <div class="text-[10px] mb-6 space-y-1.5 font-mono text-zinc-600">
                        <div class="flex justify-between"><span>æ—¥æœŸ DATE:</span><span id="receipt-date" class="font-bold text-black"></span></div>
                        <div class="flex justify-between"><span>å•å· NO.:</span><span id="receipt-id" class="font-bold text-black"></span></div>
                        <div class="flex justify-between"><span>æ¡Œå· TABLE:</span><span id="receipt-table" class="font-bold text-black border-b border-dashed border-black px-1 min-w-[20px] text-right">--</span></div>
                    </div>

                    <div class="receipt-line mb-4 border-b border-dashed border-zinc-400"></div>
                    <div class="flex text-[10px] font-bold mb-2 uppercase tracking-wider text-zinc-500 items-baseline">
                        <span class="w-8">Qty</span><span class="flex-grow">Item</span><span class="text-right">Amt</span>
                    </div>
                    <div id="receipt-items-list" class="space-y-2 mb-6 text-xs min-h-[100px]"></div>
                    <div class="receipt-line mb-4 border-b border-dashed border-zinc-400"></div>

                    <div class="flex justify-between items-baseline mb-6">
                        <span class="text-sm font-bold uppercase">Total Amount</span>
                        <span id="receipt-total" class="text-2xl font-serif font-bold"></span>
                    </div>

                    <div id="receipt-note-container" class="mb-8 hidden">
                        <p class="text-[9px] font-bold uppercase mb-1 text-zinc-500">Remarks:</p>
                        <p id="receipt-note" class="text-xs font-mono bg-zinc-100 p-2 break-words border-l-2 border-[#c5a059]"></p>
                    </div>

                    <div class="text-center space-y-2">
                        <div class="inline-block border border-black px-4 py-1 text-[10px] tracking-widest uppercase font-bold">Thank You</div>
                        <p class="text-[9px] text-zinc-500 italic font-serif">ç¨»ç”°è¾¹Â·ç§å®´ - ä¸æ—¶ä¸é£Ÿ</p>
                    </div>

                    <div class="absolute bottom-8 right-8 w-24 h-24 border-4 border-[#c5a059] rounded-full flex items-center justify-center opacity-20 pointer-events-none seal-badge" style="transform: rotate(-25deg);">
                        <span class="text-[#c5a059] font-serif font-bold text-xs tracking-widest uppercase">Confirmed</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="fixed bottom-12 left-1/2 -translate-x-1/2 border border-[#c5a059] bg-black text-[#c5a059] px-8 py-3 rounded-none shadow-2xl opacity-0 transition-opacity pointer-events-none z-[80] tracking-widest text-sm uppercase">å·²é€‰å…¥èœå•</div>

    <script>
        // æ¢å¤å®Œæ•´èœå•æ•°æ®
        const menuData = [
            { id: 101, category: "å‡‰èœ", name: "å¥¥é¹…", price: 88, desc: "ä¸€ä¾‹", img: "https://i.ibb.co/BVmjNgvz/ae.jpg" },
            { id: 102, category: "å‡‰èœ", name: "é…±é¸­", price: 88, desc: "åŠåª", img: "https://i.ibb.co/ffYwPZ9/jy.jpg" },
            { id: 103, category: "å‡‰èœ", name: "ç™½æ–©é¸¡", price: 70, desc: "åŠåª", img: "https://i.ibb.co/jZz31rVb/bzj.jpg" },
            { id: 104, category: "å‡‰èœ", name: "é¦™é…¥é¸­", price: 35, desc: "åŠåª", img: "https://i.ibb.co/0RjRgS7Z/xsy.jpg" },
            { id: 105, category: "å‡‰èœ", name: "ç³–è—•", price: 20, desc: "æ¸…è„†çˆ½å£", img: "https://i.ibb.co/qLLLxCTT/to.jpg" },
            { id: 106, category: "å‡‰èœ", name: "æ²¹çˆ†å°æ‚é±¼", price: 20, desc: "é¦™é…¥ä¸‹é…’", img: "https://i.ibb.co/KcFqfMLV/ybxzy.jpg" },
            { id: 107, category: "å‡‰èœ", name: "ç™½åˆ‡è‚šæ¡", price: 48, desc: "åŸæ±åŸå‘³", img: "https://i.ibb.co/9H9rKpBH/bqdt.jpg" },
            { id: 108, category: "å‡‰èœ", name: "é…±ç‰›è‚‰", price: 48, desc: "é…±é¦™æµ“éƒ", img: "https://i.ibb.co/279YpnPR/jnr.jpg" },
            { id: 109, category: "å‡‰èœ", name: "ç³Ÿé¸¡çˆª", price: 25, desc: "é…’é¦™å¾®é†º", img: "https://i.ibb.co/3YSSWKgw/zjz.jpg" },
            { id: 110, category: "å‡‰èœ", name: "é©¬å…°å¤´æ‹Œé¦™å¹²", price: 15, desc: "ç”°å›­é£å‘³", img: "https://i.ibb.co/SwN6t73w/mltbxg.jpg" },
            { id: 111, category: "å‡‰èœ", name: "è´ç¬‹ä¸", price: 12, desc: "æ¸…çˆ½", img: "https://i.ibb.co/9HrRhY93/wss.jpg" },
            { id: 112, category: "å‡‰èœ", name: "ç³Ÿæ¯›è±†", price: 12, desc: "å…¥å‘³", img: "https://i.ibb.co/ymHz0vRh/zmd.webp" },
            { id: 113, category: "å‡‰èœ", name: "çš®è›‹è±†è…", price: 12, desc: "ç»å…¸å‡‰æ‹Œ", img: "https://i.ibb.co/pv7XfkQZ/pddf.jpg" },
            { id: 114, category: "å‡‰èœ", name: "æ‹Œé»„ç“œ", price: 12, desc: "è„†å«©", img: "https://i.ibb.co/NgD0B5f9/bhg.jpg" },
            { id: 115, category: "å‡‰èœ", name: "å‡‰æ‹Œæµ·èœ‡å¤´", price: 25, desc: "è„†å«©", img: "https://i.ibb.co/wFFvYML8/image.png" },
            { id: 201, category: "æ°´äº§", name: "ç”²é±¼", price: 218, desc: "æ»‹è¡¥åœ£å“", img: "https://i.ibb.co/ksBwkHJB/hsjy.jpg" },
            { id: 202, category: "æ°´äº§", name: "å¤§è‚ çƒ§é³—é±¼", price: 198, desc: "æµ“æ²¹èµ¤é…±", img: "https://i.ibb.co/Wps1KyF8/hsmy.jpg" },
            { id: 203, category: "æ°´äº§", name: "ç”°é¸¡çƒ§é³ç­’", price: 98, desc: "åŒé²œåˆç’§", img: "https://i.ibb.co/bMNYfMYm/hsst.jpg" },
            { id: 204, category: "æ°´äº§", name: "å“æ²¹é³ä¸", price: 88, desc: "è‹å¸®åèœ", img: "https://i.ibb.co/Nd9YB6kw/xyss.jpg" },
            { id: 205, category: "æ°´äº§", name: "é…¸èœé»‘é±¼ç‰‡", price: 78, desc: "é…¸çˆ½å¼€èƒƒ", img: "https://i.ibb.co/nW5bjH7/schyp.jpg" },
            { id: 206, category: "æ°´äº§", name: "ç™½æ°´é±¼", price: 78, desc: "æ¸…è’¸ç»†å«©", img: "https://i.ibb.co/5hM2MGMZ/bsy.webp" },
            { id: 207, category: "æ°´äº§", name: "ç•ªèŒ„é²ˆé±¼ç‰‡", price: 68, desc: "é…¸ç”œé€‚å£", img: "https://i.ibb.co/j9BzXJcW/fqlyp.jpg" },
            { id: 208, category: "æ°´äº§", name: "ç›æ°´æ²³è™¾", price: 75, desc: "5ä¸¤", img: "https://i.ibb.co/jvjrdT6q/ysx.jpg" },
            { id: 209, category: "æ°´äº§", name: "æ²¹çˆ†æ²³è™¾", price: 75, desc: "5ä¸¤", img: "https://i.ibb.co/hxKHp9Jv/ybhx.jpg" },
            { id: 210, category: "æ°´äº§", name: "æ¯›è±†ç”°é¸¡", price: 48, desc: "6åª", img: "https://i.ibb.co/cSH667bX/mdtj.jpg" },
            { id: 211, category: "æ°´äº§", name: "é³Šé±¼", price: 48, desc: "é²œç¾", img: "https://i.ibb.co/j93D1zTK/hsby.png" },
            { id: 212, category: "æ°´äº§", name: "æ˜‚åˆºé±¼", price: 45, desc: "3æ¡", img: "https://i.ibb.co/RkLYwxtx/acydft.jpg" },
            { id: 213, category: "æ°´äº§", name: "çˆ†ç‚’èºè›³", price: 20, desc: "å˜¬å‘³åè¶³", img: "https://i.ibb.co/jvvzw1LW/bcls.jpg" },
            { id: 214, category: "æ°´äº§", name: "å‰æ¤’é±¼å¤´", price: 0, desc: "æ—¶ä»·", img: "https://i.ibb.co/TxGK30RY/djyt.jpg" },
            { id: 215, category: "æ°´äº§", name: "æ¢­å­èŸ¹", price: 0, desc: "æ—¶ä»·", img: "https://i.ibb.co/QSB89XF/szx.jpg" },
            { id: 301, category: "è‚‰é£Ÿ", name: "éº»é¸­çŒªè‚š", price: 118, desc: "æ±¤é²œå‘³ç¾", img: "https://i.ibb.co/dNKZ3tn/hsmy.jpg" },
            { id: 302, category: "è‚‰é£Ÿ", name: "çº¢çƒ§é¹…å—", price: 88, desc: "å…¥å‘³åŠ²é“", img: "https://i.ibb.co/yF0LxZ2s/hsek.jpg" },
            { id: 303, category: "è‚‰é£Ÿ", name: "é¸­è¡€å¤§è‚ ç…²", price: 78, desc: "é¦™è¾£è¿‡ç˜¾", img: "https://i.ibb.co/BHnSWnf4/yxdcb.jpg" },
            { id: 304, category: "è‚‰é£Ÿ", name: "çŒªæ‰‹é¸¡çˆª", price: 68, desc: "èƒ¶åŸè›‹ç™½", img: "https://i.ibb.co/HDRc8FMQ/hsrjz.jpg" },
            { id: 305, category: "è‚‰é£Ÿ", name: "å’¸è¹„è†€", price: 68, desc: "å’¸é¦™è½¯çƒ‚", img: "https://i.ibb.co/C5DW6KTV/jyxt.jpg" },
            { id: 306, category: "è‚‰é£Ÿ", name: "çº¢çƒ§é¸¡å—", price: 48, desc: "å®¶å¸¸é£å‘³", img: "https://i.ibb.co/qYmTmHNx/hsjk.webp" },
            { id: 307, category: "è‚‰é£Ÿ", name: "ç³–é†‹æ’éª¨", price: 48, desc: "é…¸ç”œé…¥å«©", img: "https://i.ibb.co/jZgmR4nR/tcpg.jpg" },
            { id: 308, category: "è‚‰é£Ÿ", name: "é±¼åœ†è‚‰åœ†", price: 48, desc: "åŒåœ†ç»„åˆ", img: "https://i.ibb.co/LXG2McCp/yy.jpg" },
            { id: 309, category: "è‚‰é£Ÿ", name: "çº¢çƒ§è‚‰", price: 58, desc: "è‚¥è€Œä¸è…»", img: "https://i.ibb.co/9FYc16D/hsr.jpg" },
            { id: 310, category: "è‚‰é£Ÿ", name: "çº¢çƒ§çŒªæ‰‹", price: 58, desc: "ç¾å®¹å…»é¢œ", img: "https://i.ibb.co/xKDs5ncm/hszs.jpg" },
            { id: 311, category: "è‚‰é£Ÿ", name: "æ¤’ç›çŒªæ‰‹", price: 58, desc: "å¤–é…¥é‡Œå«©", img: "https://i.ibb.co/KzqK69HN/jyzt.jpg" },
            { id: 313, category: "è‚‰é£Ÿ", name: "å¨ƒå¨ƒèœå’¸è‚‰", price: 58, desc: "é²œå’¸åˆä¸€", img: "https://i.ibb.co/RTD2JQsd/wwcxr.jpg" },
            { id: 314, category: "è‚‰é£Ÿ", name: "ç¬‹å¹²æ²¹æ³¡å¡è‚‰", price: 38, desc: "å¸æ±å…¥å‘³", img: "https://i.ibb.co/4wcGDBJG/ypsr.jpg" },
            { id: 315, category: "è‚‰é£Ÿ", name: "æ¤’ç›æ’æ¡", price: 38, desc: "é…¥è„†å¯å£", img: "https://i.ibb.co/Q7svShjG/jypt.jpg" },
            { id: 316, category: "è‚‰é£Ÿ", name: "æ²¹ç‚¸æ‰‡å­éª¨", price: 58, desc: "å¤–é…¥é‡Œå«©", img: "https://i.ibb.co/m5wRRbFb/image.png" },
            { id: 317, category: "è‚‰é£Ÿ", name: "çº¢çƒ§ç¾Šè‚‰", price: 88, desc: "å®¶å¸¸é£å‘³", img: "https://i.ibb.co/DHbwXN4p/image.png" },
            { id: 318, category: "è‚‰é£Ÿ", name: "çº¢æ–¹", price: 88, desc: "å®¶å¸¸é£å‘³", img: "https://i.ibb.co/Swf69Dwg/image.png" },
            { id: 402, category: "ç‚’èœ", name: "é…¸èœè‚šç‰‡", price: 48, desc: "çˆ½è„†", img: "https://i.ibb.co/VpbL4CsY/scdp.png" },
            { id: 403, category: "ç‚’èœ", name: "é’æ¤’è‚šç‰‡", price: 48, desc: "å¾®è¾£", img: "https://i.ibb.co/35z2Tx4S/qjdp.jpg" },
            { id: 405, category: "ç‚’èœ", name: "åœŸè±†è’¸å’¸è‚‰", price: 48, desc: "å’¸é¦™è½¯ç³¯", img: "https://i.ibb.co/HfcVHKSN/tdzxr.jpg" },
            { id: 406, category: "ç‚’èœ", name: "æ´‹è‘±å°è‚ ", price: 48, desc: "å¹²é¦™", img: "https://i.ibb.co/qMngb936/hsxc.png" },
            { id: 407, category: "ç‚’èœ", name: "å’¸èœå°è‚ ", price: 48, desc: "ä¸‹é¥­", img: "https://i.ibb.co/zVKvSfbk/xcxc.webp" },
            { id: 408, category: "ç‚’èœ", name: "é…±çˆ†çŒªè‚", price: 28, desc: "å«©æ»‘", img: "https://i.ibb.co/7tsXprMQ/jbzg.webp" },
            { id: 409, category: "ç‚’èœ", name: "é“¶é±¼ç‚’è›‹", price: 28, desc: "é²œå«©", img: "https://i.ibb.co/s9SvTzXY/yycd.jpg" },
            { id: 410, category: "ç‚’èœ", name: "é“¶é±¼è›‹é¥¼", price: 28, desc: "é¦™é…¥", img: "https://i.ibb.co/tMFft50R/yydb.webp" },
            { id: 411, category: "ç‚’èœ", name: "è’œè‹—ç‰›è‚‰ä¸", price: 38, desc: "ç»å…¸æ­é…", img: "https://i.ibb.co/dsnjRn3y/smnrs.jpg" },
            { id: 412, category: "ç‚’èœ", name: "é’æ¤’ç‰›è‚‰ä¸", price: 38, desc: "å®¶å¸¸å¿«æ‰‹", img: "https://i.ibb.co/6JrrFndN/qjnrs.jpg" },
            { id: 413, category: "ç‚’èœ", name: "åƒå¼ é¸¡è›‹ç…²", price: 30, desc: "æ±¤æ±æµ“éƒ", img: "https://i.ibb.co/20WXDtkH/qzjdb.webp" },
            { id: 414, category: "ç‚’èœ", name: "è±ç™½æ¯›è±†", price: 25, desc: "æ—¶ä»¤è”¬èœ", img: "https://i.ibb.co/Mxk7zc21/lbmd.webp" },
            { id: 415, category: "ç‚’èœ", name: "åŒè‡è‚‰ç‰‡", price: 25, desc: "èŒè‡é²œç¾", img: "https://i.ibb.co/gMMBmr81/sgrp.webp" },
            { id: 416, category: "ç‚’èœ", name: "å±±è¯æœ¨è€³è‚‰ç‰‡", price: 25, desc: "å…»ç”Ÿæ¸…ç‚’", img: "https://i.ibb.co/67m7TjR2/symerp.webp" },
            { id: 420, category: "ç‚’èœ", name: "æ²¹è±†è…", price: 25, desc: "å¸æ±", img: "https://i.ibb.co/N6zjYGz6/ydf.png" },
            { id: 421, category: "ç‚’èœ", name: "è‚‰æœ«ç²‰çš®ç…²", price: 28, desc: "æ»‘æºœ", img: "https://i.ibb.co/XrGLmhQb/rmfpb.png" },
            { id: 422, category: "ç‚’èœ", name: "èŠ¹èœè‚‰ä¸", price: 22, desc: "æ¸…é¦™", img: "https://i.ibb.co/GQrhhFG4/qcrs.png" },
            { id: 423, category: "ç‚’èœ", name: "è‚‰æœ«è´ç¬‹ä¸", price: 25, desc: "è„†å«©", img: "https://i.ibb.co/DffnBx57/rmwss.png" },
            { id: 424, category: "ç‚’èœ", name: "é’æ¤’è‚‰ç‰‡", price: 20, desc: "ä¸‹é¥­", img: "https://i.ibb.co/s9Hj1B3L/qjrp.png" },
            { id: 425, category: "ç‚’èœ", name: "æ°´èŠ¹å¹²ä¸", price: 22, desc: "æ¸…çˆ½", img: "https://i.ibb.co/XxkGWWss/sqgs.png" },
            { id: 427, category: "ç‚’èœ", name: "éŸ­é»„è‚‰ä¸", price: 22, desc: "é²œå«©", img: "https://i.ibb.co/PsHRRNcP/jhrs.png" },
            { id: 428, category: "ç‚’èœ", name: "éŸ­é»„ç‚’è›‹", price: 20, desc: "æ»‘å«©", img: "https://i.ibb.co/HDmjHmmr/jhcd.jpg" },
            { id: 429, category: "ç‚’èœ", name: "å’¸èœæ¯›è±†è‚‰ä¸", price: 22, desc: "ä½ç²¥ç¥å™¨", img: "https://i.ibb.co/sdj5KvmP/xcmdrs.png" },
            { id: 430, category: "ç‚’èœ", name: "èŒ­ç™½è‚‰ä¸", price: 22, desc: "æ—¶ä»¤", img: "https://i.ibb.co/TMZFhGKc/jbrs.jpg" },
            { id: 431, category: "ç‚’èœ", name: "è’œè‹—è‚‰ä¸", price: 22, desc: "é¦™", img: "https://i.ibb.co/PvWLfSrT/smrs.png" },
            { id: 433, category: "ç‚’èœ", name: "éº»å©†è±†è…", price: 18, desc: "éº»è¾£é²œé¦™", img: "https://i.ibb.co/3ynTxWg6/mpdf.webp" },
            { id: 434, category: "ç‚’èœ", name: "é…¸è¾£åœŸè±†ä¸", price: 16, desc: "å¼€èƒƒ", img: "https://i.ibb.co/WvdgWL5M/sltds.png" },
            { id: 435, category: "ç‚’èœ", name: "ç•ªèŒ„ç‚’è›‹", price: 15, desc: "å›½æ°‘èœ", img: "https://i.ibb.co/twnc7Z0M/fqcd.png" },
            { id: 504, category: "è”¬é£Ÿ", name: "é…’é¦™è‰å¤´", price: 25, desc: "æ¸…é¦™", img: "https://i.ibb.co/B5hWsyYq/jxct.png" },
            { id: 509, category: "è”¬é£Ÿ", name: "æ²¹ç„–èŒ„å­", price: 20, desc: "è½¯çƒ‚å…¥å‘³", img: "https://i.ibb.co/rfw1J6CQ/ymqz.webp" },
            { id: 510, category: "è”¬é£Ÿ", name: "ç©ºå¿ƒèœ", price: 18, desc: "æ¸…ç‚’", img: "https://i.ibb.co/BVhZ6hY0/kxc.png" },
            { id: 511, category: "è”¬é£Ÿ", name: "éŸ­èœ", price: 18, desc: "é²œ", img: "https://i.ibb.co/x88LNnTx/jc.png" },
            { id: 512, category: "è”¬é£Ÿ", name: "ç”Ÿèœ", price: 18, desc: "è„†", img: "https://i.ibb.co/4wvq8RWW/sc.webp" },
            { id: 513, category: "è”¬é£Ÿ", name: "é¸¡æ¯›èœ", price: 18, desc: "å«©", img: "https://i.ibb.co/W4h6hyrc/jmc.webp" },
            { id: 514, category: "è”¬é£Ÿ", name: "è‘±æ²¹èš•è±†", price: 30, desc: "æ˜¥å‘³", img: "https://i.ibb.co/Kj1FTXCZ/cycd.webp" },
            { id: 515, category: "è”¬é£Ÿ", name: "å’¸èœè±†ç“£", price: 30, desc: "é²œé¦™", img: "https://i.ibb.co/rKvfbCzz/xcdb.webp" },
            { id: 516, category: "è”¬é£Ÿ", name: "è±†ç“£ç‚’è›‹", price: 30, desc: "é²œå«©", img: "https://i.ibb.co/HppJ3J1n/dbcd.webp" },
            { id: 517, category: "è”¬é£Ÿ", name: "è èœ", price: 18, desc: "é²œå«©", img: "https://i.ibb.co/rK39p1Sf/image.jpg" },
            { id: 601, category: "æ±¤ç±»", name: "è€é¸­æ±¤", price: 188, desc: "æ»‹é˜´è¡¥è‚º", img: "https://i.ibb.co/Q3f70M7J/lyt.png" },
            { id: 602, category: "æ±¤ç±»", name: "è€æ¯é¸¡æ±¤", price: 158, desc: "å…ƒæ°”æ»¡æ»¡", img: "https://i.ibb.co/qF0bHWtH/lmjt.png" },
            { id: 603, category: "æ±¤ç±»", name: "æ’éª¨æ±¤", price: 48, desc: "æ¸…æ¶¦", img: "https://i.ibb.co/kVsXXZRF/pgt.png" },
            { id: 604, category: "æ±¤ç±»", name: "å†¬ç“œå’¸è‚‰æ±¤", price: 38, desc: "è§£è…»", img: "https://i.ibb.co/DgzBqVjG/dgxrt.png" },
            { id: 605, category: "æ±¤ç±»", name: "é¢ç­‹è‚‰çš®æ±¤", price: 28, desc: "ä¸°å¯Œ", img: "https://i.ibb.co/qYHD4Dmm/mjrpt.png" },
            { id: 606, category: "æ±¤ç±»", name: "è èœè‚‰ä¸è±†è…ç¾¹", price: 22, desc: "æ»‘çˆ½", img: "https://i.ibb.co/FqhJGzPx/jcrsdfg.webp" },
            { id: 607, category: "æ±¤ç±»", name: "æ¦¨èœè‚‰ä¸æ±¤", price: 18, desc: "å¼€èƒƒ", img: "https://i.ibb.co/v4R8KPPP/zcrst.png" },
            { id: 608, category: "æ±¤ç±»", name: "ç•ªèŒ„è›‹æ±¤", price: 15, desc: "é…¸ç”œ", img: "https://i.ibb.co/qLySxhnz/fqdt.png" },
            { id: 609, category: "æ±¤ç±»", name: "ç´«èœè›‹æ±¤", price: 15, desc: "é²œç¾", img: "https://i.ibb.co/3Y9x1977/zcdt.webp" },
            { id: 701, category: "ç‚¹å¿ƒ", name: "è èœçŒªè‚‰æ°´é¥º", price: 30, desc: "æ‰‹å·¥ç°åŒ…", img: "https://i.ibb.co/Ng06bWSQ/jczrsj.webp" },
            { id: 702, category: "ç‚¹å¿ƒ", name: "è èœçŒªè‚‰é¦„é¥¨", price: 30, desc: "çš®è–„é¦…å¤§", img: "https://i.ibb.co/BK7cMvsK/jczrht.png" },
            { id: 703, category: "ç‚¹å¿ƒ", name: "çº¢æ±¤é¢", price: 20, desc: "è‹å¼é£å‘³", img: "https://i.ibb.co/qLwvV3s4/htm.png" },
            { id: 704, category: "ç‚¹å¿ƒ", name: "çº¢ç³–å‘ç³•", price: 20, desc: "æ¾è½¯é¦™ç”œ", img: "https://i.ibb.co/r2MkxXYS/htfg.png" },
            { id: 705, category: "ç‚¹å¿ƒ", name: "é‡èœè¸é¥¼", price: 10, desc: "4åª", img: "https://i.ibb.co/BK27DRrz/yctb.png" },
            { id: 801, category: "é…’æ°´", name: "æ¤°å¥¶(å¤§)", price: 18, desc: "é¥®æ–™ å¤§ç“¶", img: "https://i.ibb.co/7dQk7cc5/yndp.webp" },
            { id: 802, category: "é…’æ°´", name: "æ©™æ±", price: 12, desc: "é¥®æ–™ å¤§ç“¶", img: "https://i.ibb.co/F4NPvGvF/glc.webp" },
            { id: 803, category: "é…’æ°´", name: "ç™¾äº‹å¯ä¹(å¤§)", price: 10, desc: "é¥®æ–™ å¤§ç“¶", img: "https://i.ibb.co/qLtbT8Mw/bskldp.png" },
            { id: 805, category: "é…’æ°´", name: "ç²—ç²®ç‹", price: 16, desc: "é¥®æ–™ å°ç½", img: "https://i.ibb.co/bMPtWnjY/clw.png" },
            { id: 807, category: "é…’æ°´", name: "ç‹è€å‰", price: 6, desc: "é¥®æ–™ å°ç½", img: "https://i.ibb.co/WW68FSbL/wlj.png" },
            { id: 912, category: "é…’æ°´", name: "ç™¾å¨", price: 10, desc: "å•¤é…’", img: "https://i.ibb.co/BV70pYxz/bw.png" },
            { id: 913, category: "é…’æ°´", name: "é’å²›çº¯ç”Ÿ", price: 10, desc: "å•¤é…’", img: "https://i.ibb.co/sJtP0jFC/qdcs.png" },
            { id: 914, category: "é…’æ°´", name: "é›ªèŠ±", price: 6, desc: "å•¤é…’", img: "https://i.ibb.co/JRTb97xB/xh.png" },
            { id: 901, category: "é…’æ°´", name: "æµ·ä¹‹è“", price: 150, desc: "ç™½é…’", img: "https://i.ibb.co/GvkSFd8x/hzl.png" },
            { id: 902, category: "é…’æ°´", name: "å£å­çª–", price: 125, desc: "ç™½é…’", img: "https://i.ibb.co/S1J2fm7/kzj.png" },
            { id: 903, category: "é…’æ°´", name: "ç™¾å¹´è¿é©¾", price: 70, desc: "ç™½é…’", img: "https://i.ibb.co/WNV2Yy8r/bnyj.png" },
            { id: 905, category: "é…’æ°´", name: "ç‰›æ å±±(å¤§)", price: 38, desc: "ç™½é…’ å¤§ç“¶", img: "https://i.ibb.co/sJb0HDg0/nlsd.png" },
            { id: 907, category: "é…’æ°´", name: "ç‰›æ å±±(å°)", price: 20, desc: "ç™½é…’ å°ç“¶", img: "https://i.ibb.co/t0yXCZm/nlsx.png" },
            { id: 908, category: "é…’æ°´", name: "æ²™æ´²ä¼˜é»„-1878", price: 28, desc: "é»„é…’", img: "https://i.ibb.co/RT4ywhGQ/szyh1878.png" },
            { id: 909, category: "é…’æ°´", name: "æ²™æ´²ä¼˜é»„-å›è£…", price: 25, desc: "é»„é…’", img: "https://i.ibb.co/5g6pQkZP/szyhtz.png" },
            { id: 910, category: "é…’æ°´", name: "æ²™æ´²ä¼˜é»„-6å¹´", price: 25, desc: "é»„é…’", img: "https://i.ibb.co/LdZ8zvrV/szyh6n.png" },
            { id: 911, category: "é…’æ°´", name: "æ²™æ´²ä¼˜é»„-2å¹´", price: 10, desc: "é»„é…’", img: "https://i.ibb.co/nNFWsB9k/szyh2n.png" }
        ];

        let cart = [];

        function formatPrice(price) { return price === 0 ? "æ—¶ä»·" : `Â¥${price}`; }

        function renderMenu(items) {
            const grid = document.getElementById('menu-grid');
            grid.innerHTML = items.map(item => `
                <div class="item-card flex flex-col">
                    <div class="h-32 md:h-40 overflow-hidden bg-zinc-900 relative">
                        <img src="${item.img}" alt="${item.name}" class="w-full h-full object-cover">
                    </div>
                    <div class="p-3 md:p-4 flex flex-col flex-grow">
                        <div class="flex justify-between items-baseline mb-1">
                            <h3 class="font-bold text-xs md:text-sm text-white truncate pr-2">${item.name}</h3>
                            <span class="text-[#c5a059] font-bold text-xs md:text-sm serif">${formatPrice(item.price)}</span>
                        </div>
                        <p class="text-zinc-500 text-[10px] mb-3 leading-tight h-8 line-clamp-2">${item.desc || ''}</p>
                        <div class="mt-auto">
                            <button onclick="addToCart(${item.id})" class="w-full border border-zinc-800 text-zinc-500 py-2 text-[9px] uppercase hover:border-[#c5a059] hover:text-[#c5a059] transition-all">é€‰å…¥</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterMenu(category, btn) {
            const btns = document.querySelectorAll('.category-btn');
            btns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const filtered = category === 'all' ? menuData : menuData.filter(i => i.category === category);
            renderMenu(filtered);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function addToCart(id) {
            const item = menuData.find(i => i.id === id);
            const exist = cart.find(i => i.id === id);
            if (exist) exist.quantity += 1; else cart.push({ ...item, quantity: 1 });
            updateCart(); showToast(`å·²é€‰å…¥: ${item.name}`);
        }

        function updateCart() {
            const container = document.getElementById('cart-items'), badge = document.getElementById('cart-badge'), total = document.getElementById('cart-total');
            const totalCount = cart.reduce((sum, i) => sum + i.quantity, 0);
            const totalPrice = cart.reduce((sum, i) => sum + (i.price * i.quantity), 0);
            badge.innerText = totalCount; badge.classList.toggle('hidden', totalCount === 0);
            total.innerText = `Â¥ ${totalPrice.toLocaleString()}`;
            container.innerHTML = cart.length === 0 ? '<div class="text-center py-20 text-zinc-600">æœªé€‰å®šä»»ä½•çé¦</div>' : cart.map(item => `
                <div class="flex items-center gap-4 bg-black/40 p-4 border border-zinc-900">
                    <img src="${item.img}" class="w-12 h-12 object-cover grayscale opacity-60">
                    <div class="flex-grow">
                        <h4 class="text-white text-xs">${item.name}</h4>
                        <p class="text-[#c5a059] text-[10px]">${formatPrice(item.price)}</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="changeQty(${item.id}, -1)" class="w-6 h-6 border border-zinc-800 text-zinc-500 hover:text-white">-</button>
                        <span class="text-zinc-300 text-[10px]">${item.quantity}</span>
                        <button onclick="changeQty(${item.id}, 1)" class="w-6 h-6 border border-zinc-800 text-zinc-500 hover:text-white">+</button>
                    </div>
                </div>`).join('');
        }

        function changeQty(id, delta) { const idx = cart.findIndex(i => i.id === id); if(idx !== -1) { cart[idx].quantity += delta; if (cart[idx].quantity <= 0) cart.splice(idx, 1); updateCart(); } }
        function toggleCart() { const sidebar = document.getElementById('cart-sidebar'), overlay = document.getElementById('cart-overlay'), isHidden = sidebar.classList.contains('translate-x-full'); sidebar.classList.toggle('translate-x-full', !isHidden); overlay.classList.toggle('hidden', !isHidden); }
        function showToast(msg) { const toast = document.getElementById('toast'); toast.innerText = msg; toast.classList.remove('opacity-0'); setTimeout(() => toast.classList.add('opacity-0'), 2000); }

        function openOrderModal() {
            if (cart.length === 0) return showToast("è¯·å…ˆé€‰æ‹©èœå“");
            toggleCart();
            document.getElementById('order-modal').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('order-modal-bg').classList.remove('opacity-0');
                document.getElementById('order-modal-content').classList.remove('opacity-0', 'scale-95');
                document.getElementById('order-modal-content').classList.add('opacity-100', 'scale-100');
            }, 10);
            const now = new Date();
            document.getElementById('receipt-date').innerText = now.toLocaleString('zh-CN', { hour12: false });
            document.getElementById('receipt-id').innerText = `DAO-${now.getTime().toString().slice(-8).toUpperCase()}`;
            renderReceiptItems();
            updateReceiptInfo();
        }

        function closeOrderModal() {
            const modal = document.getElementById('order-modal');
            document.getElementById('order-modal-bg').classList.add('opacity-0');
            document.getElementById('order-modal-content').classList.add('opacity-0', 'scale-95');
            setTimeout(() => { modal.classList.add('hidden'); }, 300);
        }

        function renderReceiptItems() {
            const list = document.getElementById('receipt-items-list');
            const totalVal = cart.reduce((sum, i) => sum + (i.price * i.quantity), 0);
            const hasMarketPrice = cart.some(i => i.price === 0);
            list.innerHTML = cart.map(item => `
                <div class="flex mb-1 items-start">
                    <span class="w-8 text-center text-zinc-600">${item.quantity}</span>
                    <span class="flex-grow pr-2 text-black">${item.name}</span>
                    <span class="text-right text-black font-bold">${item.price === 0 ? "æ—¶ä»·" : (item.price * item.quantity).toLocaleString()}</span>
                </div>
            `).join('');
            document.getElementById('receipt-total').innerText = hasMarketPrice ? `Â¥ ${totalVal.toLocaleString()} +` : `Â¥ ${totalVal.toLocaleString()}`;
        }

        function updateReceiptInfo() {
            const table = document.getElementById('input-table').value;
            const note = document.getElementById('input-note').value;
            document.getElementById('receipt-table').innerText = table.trim() || "--";
            if (note.trim()) {
                document.getElementById('receipt-note-container').classList.remove('hidden');
                document.getElementById('receipt-note').innerText = note;
            } else {
                document.getElementById('receipt-note-container').classList.add('hidden');
            }
        }

        function saveOrderImage() {
            const receipt = document.getElementById('receipt-card');
            showToast("æ­£åœ¨ä¿å­˜è®¢å•å›¾ç‰‡...");
            
            // æ¿€æ´»å¢å¼ºæ’ç‰ˆ
            receipt.classList.add('thermal-mode');
            
            html2canvas(receipt, {
                backgroundColor: "#ffffff",
                scale: 3, 
                width: 380,
                useCORS: true,
                logging: false,
                onclone: (clonedDoc) => {
                    // ç¡®ä¿å…‹éš†å‡ºçš„ DOM ä¹Ÿåº”ç”¨äº† thermal-mode ç±»
                    const clonedReceipt = clonedDoc.getElementById('receipt-card');
                    clonedReceipt.classList.add('thermal-mode');
                }
            }).then(canvas => {
                const link = document.createElement('a');
                const timestamp = new Date().getTime();
                link.download = `ç¨»ç”°è¾¹è®¢å•-${timestamp}.png`;
                link.href = canvas.toDataURL("image/png");
                link.click();
                
                receipt.classList.remove('thermal-mode');
                showToast("è®¢å•å›¾ç‰‡å·²ä¿å­˜");
            }).catch(err => {
                receipt.classList.remove('thermal-mode');
                console.error(err);
                showToast("ä¿å­˜å¤±è´¥");
            });
        }

        function copyOrderText() {
            const table = document.getElementById('input-table').value || "æœªå¡«å†™";
            const note = document.getElementById('input-note').value || "æ— ";
            const total = document.getElementById('receipt-total').innerText;
            const now = new Date().toLocaleString('zh-CN', { hour12: false });

            let text = `ã€ç¨»ç”°è¾¹Â·ç§å®´è®¢å•ã€‘\nğŸ“… æ—¶é—´: ${now}\nğŸ“ æ¡Œå·: ${table}\n------------------\n`;
            cart.forEach(item => {
                text += `â–«ï¸ ${item.name} x${item.quantity}  ${item.price === 0 ? "æ—¶ä»·" : item.price * item.quantity}\n`;
            });
            text += `------------------\nğŸ’° æ€»è®¡: ${total}\nğŸ“ å¤‡æ³¨: ${note}`;

            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            textArea.style.top = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                document.execCommand('copy');
                showToast("æ–‡æœ¬å·²å¤åˆ¶");
            } catch (err) {
                showToast("å¤åˆ¶å¤±è´¥");
            }
            document.body.removeChild(textArea);
        }

        window.onload = () => { renderMenu(menuData); };
    </script>
</body>
</html>


